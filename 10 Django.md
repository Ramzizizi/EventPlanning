![alt text](https://static.tildacdn.com/tild3561-6163-4531-b662-383539366166/WIS_LOGO_white_NEW.svg)

# Django - Теория

Теоретическая часть отвечается блокамии в 2 или 3 подхода. Вопросов очень много.

**Время на карточку**
- 88 ч.

**Темы**
- Django

**Техническое задание**

Реализовать web приложение использующее следующие технологии:

- Many to many связи
- Abstract Table Inheritance
- Mulititable Inheritance
- Кастомные действия в админке
- Celery задачи

**Теоретические вопросы**
---

**_The Model Layer_**

- что делает using?
- Позволяет использовать иную базу данных


- какие типы полей вам известны?
- время (DateTime), число(Integer, Decimal, Float), связь (OneToOne, ManyToMany, ForeignKey), строка(char), выбор(IntegerChoice)


- что делает blank=True? В чем отличие от null=True?
- blank позволяет проходить валидацию пустому полю, null преобразует пустое поле в None при сохранении


- для чего необходимо свойство choices?
- выбор для Enum или других вариантов выбора


- нужно ли свойство null=True для TextField / CharField ?
- можно задавать, но возможны проблемы т.к. данные поля могут быть пустыми как в виде None, так и в виде ""


- ForeignKey, CharField, ManyToMany
- Связь между объектами


- для чего нужен on_delete?
- определяет поведение при удалении объекта


- как реализовать ManyToMany через костюмную таблицу?
- создание таблицы с полями для id двух таблиц


- что такое сигналы?
- настраиваемые колбэки вызываемые при действиях для контроля работы и вызова действий 


- какой тип связи БД будет применен к python наследованию классов моделей данных?
- ?


- как добавить / удалить / очистить все связанные по ManyToMany сущности?
- create, remove, clear


- как обратиться к списку сущностей связанной модели? Как можно это настраивать?
- через связанное поле


- можно ли создать ForeignKey на ту же модель (саму на себя)?
- да, указать models.ForeignKey(название модели) или models.ForeignKey(self)


- могу ли я назвать поле так some__name?
- нет, __ служит для получения поля таблицы


- приведите пример настроек класса модели через класс Meta 
- абстрактность, проверка наличия полей


- расскажите про свойство модели objects
- модели хранимые в менеджере


- как работает метод save / delete?
- расскажите про raw_sql


- расскажите про Abstract / Proxy models
- abstract нужен для наследования без создания таблицы в бд


- расскажите про Multi Table Inharitance
- множественное наследование таблиц от одного родителя таблицы


- как указать related_name для AbstractClass?
- через "%(app_label)s%" для названия приложения и "%(class)s" для названия объекта


- расскажите про индексы
- индексы определяются в мета классе модели, указываются в листе indexes с помощью обозначения models.Index(fields=[])


- что такое QuerySet? Основные методы QuertySet
- это коллекция моделей из менеджера доступная для фильтрации


- как можно инициализировать запрос непосредственно в БД?
- через функцию raw у свойства objects?


- фильтрация по связанным моделям данных
- использование фильтра на свойстве objects вида "имя модели"__"название поля"


- F expression, Count, Max, Case, When, Subquery, Q, Exists
- F совершает обработку над полем модели без выгрузки поля в память
- Subquery формирует дополнительный запрос поверх первичного запроса
- Exists тип подзапроса использующий функцию SQL "EXISTS", можно использовать обратную версию с помощью "~"


- как работает кеширование QuerySet?
- при применении фильтров к выполненному запросу QuerySet все ответы будут кэшированы, при фильтрации каждого нового QuerySet кэширования не будет


- как скопировать инстанс сущности модели со всеми его значениями свойствами?
- установка pk в None и сохранение 


- select_related, prefetch_related,bulk_update, bulk_create
- select_related вызывает загрузку связанный объектов совместно с запрашиваемыми, prefetch_related вызывает загрузку связанных объектов отдельным SQL запросом
- bulk_update обновление сразу нескольких объектов идентичной модели, bulk_create создание сразу нескольких объектов идентичных моделей


- annotate, aggregte
- annotate добавление дополнительного поля, aggregate агрегация полей модели с помощью агрегирующих функций


- как реализовать GROUP BY в Django ORM?
- необходимо задать values при формировании QuerySet


- для чего нужен refresh_from_db?
- обновление полей модели


- где хранятся записи о примененных миграциях приложения?
- в папке migrations


- можно ли выполнять код в миграциях?
- код можно выполнять при вызове класса RunPython


- как откатить миграции?
- нужно вызвать стандартную команду выполнения миграции с указанием имени миграции


- как создать миграцию с осмысленным названием?
- необходимо добавить параметр "--name"


- как работать с транзакциями в Django?
- можно настроить атомарность при выполнении нескольких операций с моделями


- как работают вложенные транзакции?
- вложение атомарной операции внутрь другой атомарной операции позволяет верхнюю транзакцию вне зависимости от вложенной, а фиксация вложенной не вызовет фиксации верхней 


- с какими данными происходит работа если обращение было выполнено в середине транзакции?
- с уже обновленными


- что такое fixtures?
- сериализированные данные доступные для подгрузки в БД


---

**_The View Layer_**

- как Django обрабатывает запрос?
- При получении запроса происходит перенаправление на одну из заданных views соответствующих полученному url


- преобразователи path
- str для строк, int для чисел, uuid для UUID, path для путей (производит анализ строки на url), slug - промежуточная строка


- обработчики ошибок в urlpath
- по умолчанию присутствуют обработки ошибок 400, 403, 404 и 500. Можно добавить кастомные ошибки или использовать кастомные страницы для установленных ошибок


- вложенные urlconf
- функцией include можно добавить подурлы для главного урла


- function based views
- когда целесообразно использовать async views?
- как подключить статику м медиа?
- HttpRequest, HttpResponse, JsonResponse, StreamingHttpResponse, FileResponse, TemplateResponse
- File object, ContentFile, ImageFile
- Class-based views, as_view
- TemplateView, ListView, CreateView, UpdateView, DeleteView, DetailView


- Generic, Mixins
- generic - используется для упрощения работы с объектами, mixins добавляют доп. методы для класса представлений


- middlewares
- срабатывают при выполнении запроса и обрабатывают запрос до входа в основной код приложения


---

**_The template layer_**

- как использовать variables, tags, filters, comments в шаблонах?
- как настроить конфигурацию шаблонов в проекте?


- где должны располагаться шаблоны?
- набор папок прописывается в параметре "DIRS" внутри "TEMPLATES"


- наследование и переопределение шаблонов
- расширение и переопределение блоков

---

**_Forms_**

- Form class
- как использовать форму в View, Template?
- From fields



- Widgets, MultiWidget
- генерируют поля в HTML представлении


- как задать стили полю через виджет?
- необходимо прописать параметры для визуализации в "attrs" поля формы



- как работает валидация формы?
- можно указать валидирующую функцию в параметрах поля, либо добавить функцию clean  


- ModelForm
- Форма основанная на модели


- валидация ModelForm
- проходит валидацию унаследованной формы или можно задать свою


- Model Form Set
- InlineFormSet

---

**_Admin_**

- как создать страницу модели в админке?
- регистрация в файле admin


- как объединить несколько страниц в группу?
- как локализовать название группы?
- ModelAdmin
- как добавить поле связанной модели в ModelAdmin?
- как добавить сортировку по полю?
- как реализовать поиск на странице списка?
- как добавить фильтры на страницу списка?
- как добавить встроенные действия для страницы списка? Как создать собственные действия?
- 


- как определить форму для создания / обновления инстансов?
- inlines


- как реализовать создание, обновление, удаление сущностей по условию?
- как создать собственные действия на странице деталей?
- 


- как сделать поле неизменяемым?
- необходимо указать "editable=False" в параметрах модели


- как группировать поля на странице деталей?
- 


- как добавить поле связанной модели ForeignKey, ManyToMany?
- необходимо указать модель


- как реализовать lazy loading для ManyToMany полей?
- при формировании QuerySet запроса необходимо добавить prefetch_related с названием поля 


- как добавить inlines?
- добавление класса наследованного от StackedInline


- как использовать разные формы на странице деталей для создания и обновления?
- в ModelAdmin необходимо добавить методы add_view и change_view


- как добавить дополнительные стили и js код?
- указать папку в параметре "STATIC_URL" и добавить туда необходимые файлы


- InlineModelAdmin
- подразделяется на StackedInline и TabularInline, дают доп данные по связанной модели (инфу по созданной или возможность создать)


---

**_Auth_**

- User model. Какой набор базовых свойств / методов содержит?
- получение имени (юзернейм, короткое и первое), модификация и проверка пароля (установка нового или удаление), проверки привилегий (как пользователя, так и его группы), отправка email 


- Как заменить username на email?
- прописать в "USERNAME_FIELD" поле email


- Какой набор базовых методов содержит UserManager?
- создание юзера и суперюзера, получение юзеров с необходимой привилегией


- AnonymousUser
- неавторизованная модель юзера


- Permission model
- модель привилегии для контроля доступа юзеров


- Group model
- модель объединяющая юзеров в группы с разными привилегиями


- Login and logout signals
- user_logged_in, user_logged_out отвечают за сигнал при входе/выходе


- get_user(request)
- получение пользователя выполняющего запрос

---

**_Локализация_**

*в settings.py необходимо добавить параметр "USE_I18N=True" для включения локализации*

- локализация формы
- в поле формы необходимо добавить параметр "localize=True"


- локализация шаблонов
- для какого-то набора данных необходимо добавить поле: 
```html
{% load l10n %}

{% localize on %}
    {{ value }}
{% endlocalize %}

{% localize off %}
    {{ value }}
{% endlocalize %}
```
- для локализации одного объекта можно использовать 
```html
{% load l10n %}

{{ value|localize }}
```
---

**_General_**

- как создать проект?
- django startupprocjet


- как создать django приложение?
- django startapp


- для чего нужна настройка DEBUG?
- определяет показ трейсбек ошибок и другие доп данные


- какую роль выполняет SECRET_KEY?
- используется для хэширования данных


- как хранятся пароли в django?
- зашифрованною в виде хэша


- как настроить конфигурацию БД в проекте?
- в файле settings.py необходимо настроить параметр "DATABASES"


- как настроить логирование в django?
- логирование настраивается в файле settings.py в параметре "LOGGING"


- Что описывает шаблон MVT? Для чего нужны шаблоны разработки ПО?
- взаимодействие модели, шаблона и визуалайзера между собой на основании созданных правил для url